import numpy as npimport pylab as plfrom pymeasure.instruments.instrument import VisaInstrument2from pymeasure.units.unit import NANOMETER, DBM, GIGAHERTZdef save_csv(path_or_file, X=None, Y=None):        if type(path_or_file) == str:            path_or_file = file(path_or_file, 'wb')        for i, x in enumerate(X):            print >> path_or_file, x, ",", Y[i]                    # GPIB 21 OPtical# GPIB 18 Electricaldef test1():    HP = VisaInstrument2(name='', address='GPIB::18')        span = 10    center = 5    I=42        command = "SNGLS;SP %.2fGHz;CF %.2fGHz;TS;"%(span, center)    HP.write(command)    #HP.write("SNGLS;SP 9.5GHz;CF 5GHz;TS;")     # 1) mixed with central freq and span    data = HP.ask("TRA?")                        # 2) unit of the vertical axis is not cerrect! and unit of the horizental is not freq!!!    data = [float(x) for x in data.split(',')]   # 3) I could not save data.     X = np.linspace(center-span/2.0,center+span/2.0,len(data))    # save the data    save_csv("RIN_at_%dmA.csv" %I, X, data)        pl.plot(X, data, 'g-')          pl.grid(True)    pl.show()            #outfile = 'D:\\users\\amin\\RIN_test.txt'    #data = np.transpose(np.array([np.array(wl_max),np.array(pwr_max)]))    #save_data(outfile, data )    #pl.plot(wl_max, pwr_max, 'go-')     #def test2():    #HP = VisaInstrument2(name='', address='GPIB::18')    #HP.write("TDF P")    #span = 10    #center = 5    ##command = "SNGLS;SP %.2fGHz;CF %.2fGHz;TS;"%(span, center)    ##HP.write(command)    ##HP.write("SNGLS;SP 9.5GHz;CF 5GHz;TS;")       # 1) mixed with central freq and span    #data = HP.ask("TRA?")                        # 2) unit of the vertical axis is not cerrect! and unit of the horizental is not freq!!!    #data = [float(x) for x in data.split(',')]   # 3) I could not save data.     #X = np.linspace(center-span/2.0,center+span/2.0,len(data))    ## save the data    #save_csv("test.csv", X, data)    #a = span / (len(data)-1) *1e9    ##for i in range(len(data)):        ##data[i] = data[i] - 10*np.log10(a)        #data2 = HP.ask("TRB?")                        # 2) unit of the vertical axis is not cerrect! and unit of the horizental is not freq!!!    #data2 = [float(x) for x in data2.split(',')]   # 3) I could not save data.     ##for i in range(len(data)):        ##data2[i] = data2[i] - 10*np.log10(a)    ## save the data    #save_csv("test2.csv", X, data2)    #pl.plot(X, data, 'g-')          #pl.plot(X, data2, 'r-')          #pl.grid(True)    #pl.show()            test1()    